큐브메쉬는 삼각형 토폴로지를 썼을때, 인덱스버퍼 사용안하면 36(6정점x6면)개, 사용하면 24(4정점x6면)개의 정점이 필요.
왜 24개씩이나 필요하나요 인덱스 버퍼써서 정점 8개로 돌려쓰면 안되나요?  -> 수업 마지막에 그 이유가 나옴. 
(미리정답 말하자면 한 정점당 하나의 법선벡터만 갖고있기 때문에, 법선벡터 값이 다른 정점들이 각 면마다 있어야되서 어쩔 수 없이 정점을 공유해서 면을 표현할 수 없다.)
(법선벡터를 써야 빛표현 계산이 가능하기 때문에 인덱스 버퍼 쓰건말건 타협되는 부분이 아님. 빛표현 안할꺼면 몰라 그런 게임이 있나?)

 - 원래 버텍스버퍼 정보는 3가지(위치 색 UV)였는데 이제 3D정점은 총 6가지 정보가 필요
  - 접선벡터, 법선벡터, 종법선벡터. (각각 탄젠트, 노말, 바이노멀) 
  - 정점정보를 바꿨으니 인풋레이아웃 정보도 바꿔줘야함
   - 시멘틱도 "TANGENT" "NORMAL" "BINOMAL" 각각 추가. (이 시멘틱이 실제로 약속된 키워드인지?)
   - 디바이스보고 CreateInputLayout()할때 두번째 인자로 3개 이렇게 넣어준걸 6개로 고친다.

 - 접선, 법선, 종법선벡터는 다 기본적으로 방향벡터다. 즉, 이제 정점에도 방향정보를 넣어줘야한다는 말이다.
  - 법선벡터 -> 어떤 평면에 수직한 방향으로 나아가는 벡터. 
    "수직으로 나가는 방향" 이라는 표현을 쓴다.
    따라서 (0,0,-1) 로 표현됨  
    
    (수직으로 들어간다는 표현을 썼다면 아마 (0,0,1)이라고 하지 않았을까? Z축이 나로부터 멀어지는 쪽이니까.)
    (플러스 마이너스 둘다 수직인데 마이너스인게 이게 약속된 고정값인지 확인 필요)

  - 탄젠트법선은 말그대로 접하는 벡터이다. 평면에 접하는(평행인) 벡터는 무한히 많지만, 탄젠트는 UV좌표계랑 동일한 방향으로 설정되기 때문에 U축 즉 X좌표를 탄젠트벡터의 방향으로 설정한다.
    따라서 (1,0,0)으로 표현됨 

    (이것도 약속된건가? 평면에 접하는 벡터(평행인벡터) 는 무한히 많은데 말이다.)

  - 바이노멀은 법선벡터의 종방향이라는 뜻으로 (0,-1,0)으로 표현됨 
    (이것도 (0,1,0) 일수 있는데 꼭 플러스 방향이 아니라 마이너스인건 약속된건가?)


 - 이 벡터들은 빛 설정에서 가장 많이 쓰인다.
 - 정점이 로컬에서 월드로 이동할때, 이 3벡터들도 같이 회전한다.
 - 각 픽셀에 노말벡터를 도출해낼수있고, 광원으로부터 들어온 빛이 어떻게 반사되는지 계산하게 해준다.

 - 어떻게 빛의 세기를 계산할까? 
  - 빛이 픽셀표면의 수직방향에 가깝게 들어올수록 빛의 세기가 세다. 즉, 빛의 방향과 노말벡터의 방향이 일치할때 가장 빛이 세고, 빛의 방향이 노말벡터의 수직일때 빛이 가장약하다.
  - 이걸 Cos 코사인 함수를 활용해서 표현이 가능하다. 두 벡터의 사이각이 0일때 1 최대값이 나오고, 90일때 0이 나온다. (각도는 0~90사이로 한정함 그 이상은 의미가 없어서)
  - 램버트 코사인법칙. 벡터 내적으로 표면이 받는 빛의 세기를 알수 있다.
  - 빛의 세기를 구한다는 것은 각 물체(픽셀)의 노말벡터로 빛의 벡터와 내적을 한다는 것을 의미한다

 

 - 이제 2D 쉐이더 3D 쉐이더 구분합니다.
  - 새로만든 std3d.fx 쉐이더 파일 설정에서 효과, 5.0 버전 설정 두개함.
   - 전역변수로 광원정보를 설정해준다. 위치, 방향, 색깔. 방향은 사선으로 들어오는 빛을 표현하려고 (1,-1,1)로 설정.

   - 방향벡터가 월드로 갈떄, 이동값 계산이 필요할까? 그러면 안된다. 제대로된 방향을 표현하는게 아니라 엉뚱한 방향을 가리키게 된다.
     다시말해, 월드뷰프로젝트 행렬을 곱할때 회전만 영향을 받아야지 이동은 무시되어야 된다는 말이다. 방향값은 이동이라는 개념이 없다. 월드행렬의 이동이 적용되어선 안된다.

     따라서, 정점에 월드뷰프로젝션을 곱했을때 과정을 똑같이하면 분명 노말벡터는 이동하는 작업도 같이 영향받을텐데 이걸 무효화하는 설정이 따로 필요하다.
     vWorldNormal = mul(float4(_in.normal,0.f), g_matWorld); 
     vPosition = mul(float4(_in.vPos, 1.f), g_matWVP)

     쉐이더에서 위치와 노멀벡터 계산하는 코드인데 차이점이 보이는가?

     Pos는 4번째 인자가 1이고 월드뷰프로젝션을 곱하지만, 노멀벡터는 4번째 인자가 0이고 오직 월드행렬만 곱한다.



=====================================================================================================


 - 빛의 방향은 노멀라이즈를 해줍니다. <- 이유 말씀해 주셨는데 이해못함. 추측으론 1이아닌 엉뚱한 값이면 이상한 방향을 가리킬수있어서 해준걸로 추측
 - 이제 노멀벡터와 빛 방향벡터를 내적해야되는데 이때 주의해야할게 빛벡터는 방향을 반대로 한번 설정해주고 내적해야 각도값이 의도한대로 설정됩니다.
   뭔 말이냐하면 내적할때 각 벡터의 출발점은 기준으로 각도를 계산하기 때문에 빛벡터를 그냥 내적하면 
   


 - 각 정점에서 빛의 세기를 계산했으면 (output.LightPow, 빛의 Power) 레스터라이저가 그걸 보간해서 넘깁니다. 내적의 결과값이기 때문에 1일때 가장 색깔이 센거에요.
 - 우주공간에서는 빛 방향이 90도가 넘어가면 그 픽셀은 아예 안보이는게 맞으나, 일상생활에서는 주변 반사광 때문에 아주 조금이라도 물체가 보이게 됩니다.
   이런 반사광을 엠비언트라고 했죠 그걸 한 10퍼센트 설정으로 전역변수로 값 저장해놀게요 (g_LightAmbient)


 - 3D로 넘어오면서 이제 CULL_BACK 모드(컬링모드) 를 쓸겁니다 즉 뒷면이 안보이게 할거에요. 즉 법선벡터 방향의 반대방향으로 바라봐야지만 물체가 보이고, 물체를
   법선벡터와 동일한 방향으로 물체를 바라볼떄, 즉 뒷면볼때는 물체가 안보여요
 - 미리 약속한것이, 우리는 시계방향으로 인덱스 접근 순서가  설정된 면을 정면이라고 보고 그렇게 세팅했죠. 

 - 큐브 메쉬가 될 정점의 정보 24개를 만들어야 되는데 앞기수 미리 만든코드 가져올게요